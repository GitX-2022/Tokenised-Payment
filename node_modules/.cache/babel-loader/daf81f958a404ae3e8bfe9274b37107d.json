{"ast":null,"code":"var _jsxFileName = \"/Users/jeyam/Desktop/Programming/Tokenised-Payment/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Web3 from \"web3\";\nimport detectEthereumProvider from \"@metamask/detect-provider\";\nimport \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [accounts, setAccounts] = useState(null);\n  const [balance, setBalance] = useState(null);\n  useEffect(() => {\n    if (window.ethereum !== \"undefined\") {\n      window.ethereum.on(\"accountsChanged\", handleAccountsChanged);\n    }\n  }, []);\n\n  const handleAccountsChanged = a => {\n    console.log(\"accounts changed\");\n    setAccounts(a);\n  };\n\n  const connectWallet = async e => {\n    e.preventDefault();\n    let accounts = await window.ethereum.request({\n      method: \"eth_requestAccounts\"\n    }).catch(err => {\n      console.log(err.code);\n    });\n    setAccounts(accounts);\n    console.log(accounts);\n  };\n\n  const checkBalance = async e => {\n    e.preventDefault();\n    const provider = await detectEthereumProvider();\n\n    if (!provider) {\n      console.log(\"No provider detected\");\n      return;\n    } else {\n      console.log(provider);\n    }\n\n    let Web3Client = new Web3(provider);\n    const minABI = [{\n      constant: true,\n      inputs: [{\n        name: \"_owner\",\n        type: \"address\"\n      }],\n      name: \"balanceOf\",\n      outputs: [{\n        name: \"balance\",\n        type: \"uint256\"\n      }],\n      type: \"function\"\n    }];\n    const tokenAddress = \"0xE3E8b36dCEA6ABa09cAdca6Cb06724D6dC9C5E1d\";\n    const walletAddress = accounts[0];\n    const contract = new Web3Client.eth.Contract(minABI, tokenAddress);\n    contract.methods.balanceOf(walletAddress).call().then(res => {\n      console.log(res);\n      setBalance(res);\n    }).catch(err => console.log(err));\n  };\n\n  const sendTransaction = async e => {\n    e.preventDefault();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Intra-college Tokenised Payment System\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => connectWallet(e),\n      children: \"Connect wallet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => checkBalance(e),\n      children: \"Check Balance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => sendTransaction(e),\n      children: \"Send Transaction\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"u82JA74+hVm3sJJM28HgZqJza4c=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Web3","detectEthereumProvider","App","accounts","setAccounts","balance","setBalance","window","ethereum","on","handleAccountsChanged","a","console","log","connectWallet","e","preventDefault","request","method","catch","err","code","checkBalance","provider","Web3Client","minABI","constant","inputs","name","type","outputs","tokenAddress","walletAddress","contract","eth","Contract","methods","balanceOf","call","then","res","sendTransaction"],"sources":["/Users/jeyam/Desktop/Programming/Tokenised-Payment/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Web3 from \"web3\";\nimport detectEthereumProvider from \"@metamask/detect-provider\";\nimport \"./styles.css\"\n\nfunction App() {\n  const [accounts, setAccounts] = useState(null);\n  const [balance, setBalance] = useState(null);\n  \n  useEffect(() => {\n    if (window.ethereum !== \"undefined\") {\n      window.ethereum.on(\"accountsChanged\", handleAccountsChanged);\n    }\n  }, []);\n\n  const handleAccountsChanged = (a) => {\n    console.log(\"accounts changed\");\n    setAccounts(a);\n  };\n\n  const connectWallet = async (e) => {\n    e.preventDefault();\n    let accounts = await window.ethereum\n      .request({ method: \"eth_requestAccounts\" })\n      .catch((err) => {\n        console.log(err.code);\n      });\n    setAccounts(accounts);\n    console.log(accounts);\n  }\n\n  const checkBalance = async (e) => {\n    e.preventDefault();\n    const provider = await detectEthereumProvider();\n\n    if (!provider) {\n      console.log(\"No provider detected\");\n      return;\n    } else {\n      console.log(provider);\n    }\n\n    let Web3Client = new Web3(provider);\n\n    const minABI = [\n      {\n        constant: true,\n        inputs: [{ name: \"_owner\", type: \"address\" }],\n        name: \"balanceOf\",\n        outputs: [{ name: \"balance\", type: \"uint256\" }],\n        type: \"function\",\n      },\n    ];\n\n    const tokenAddress = \"0xE3E8b36dCEA6ABa09cAdca6Cb06724D6dC9C5E1d\";\n    const walletAddress = accounts[0];\n\n    const contract = new Web3Client.eth.Contract(minABI, tokenAddress);\n    contract.methods\n      .balanceOf(walletAddress)\n      .call()\n      .then((res) => {\n        console.log(res);\n        setBalance(res);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  const sendTransaction = async (e) => {\n    e.preventDefault();\n    \n\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Intra-college Tokenised Payment System</h1>\n      <button onClick={(e) => connectWallet(e)}>Connect wallet</button>\n      <button onClick={(e) => checkBalance(e)}>Check Balance</button>\n      <button onClick={(e) => sendTransaction(e)}>Send Transaction</button>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,sBAAP,MAAmC,2BAAnC;AACA,OAAO,cAAP;;;AAEA,SAASC,GAAT,GAAe;EAAA;;EACb,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,IAAD,CAAxC;EACA,MAAM,CAACM,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,IAAD,CAAtC;EAEAD,SAAS,CAAC,MAAM;IACd,IAAIS,MAAM,CAACC,QAAP,KAAoB,WAAxB,EAAqC;MACnCD,MAAM,CAACC,QAAP,CAAgBC,EAAhB,CAAmB,iBAAnB,EAAsCC,qBAAtC;IACD;EACF,CAJQ,EAIN,EAJM,CAAT;;EAMA,MAAMA,qBAAqB,GAAIC,CAAD,IAAO;IACnCC,OAAO,CAACC,GAAR,CAAY,kBAAZ;IACAT,WAAW,CAACO,CAAD,CAAX;EACD,CAHD;;EAKA,MAAMG,aAAa,GAAG,MAAOC,CAAP,IAAa;IACjCA,CAAC,CAACC,cAAF;IACA,IAAIb,QAAQ,GAAG,MAAMI,MAAM,CAACC,QAAP,CAClBS,OADkB,CACV;MAAEC,MAAM,EAAE;IAAV,CADU,EAElBC,KAFkB,CAEXC,GAAD,IAAS;MACdR,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAhB;IACD,CAJkB,CAArB;IAKAjB,WAAW,CAACD,QAAD,CAAX;IACAS,OAAO,CAACC,GAAR,CAAYV,QAAZ;EACD,CATD;;EAWA,MAAMmB,YAAY,GAAG,MAAOP,CAAP,IAAa;IAChCA,CAAC,CAACC,cAAF;IACA,MAAMO,QAAQ,GAAG,MAAMtB,sBAAsB,EAA7C;;IAEA,IAAI,CAACsB,QAAL,EAAe;MACbX,OAAO,CAACC,GAAR,CAAY,sBAAZ;MACA;IACD,CAHD,MAGO;MACLD,OAAO,CAACC,GAAR,CAAYU,QAAZ;IACD;;IAED,IAAIC,UAAU,GAAG,IAAIxB,IAAJ,CAASuB,QAAT,CAAjB;IAEA,MAAME,MAAM,GAAG,CACb;MACEC,QAAQ,EAAE,IADZ;MAEEC,MAAM,EAAE,CAAC;QAAEC,IAAI,EAAE,QAAR;QAAkBC,IAAI,EAAE;MAAxB,CAAD,CAFV;MAGED,IAAI,EAAE,WAHR;MAIEE,OAAO,EAAE,CAAC;QAAEF,IAAI,EAAE,SAAR;QAAmBC,IAAI,EAAE;MAAzB,CAAD,CAJX;MAKEA,IAAI,EAAE;IALR,CADa,CAAf;IAUA,MAAME,YAAY,GAAG,4CAArB;IACA,MAAMC,aAAa,GAAG7B,QAAQ,CAAC,CAAD,CAA9B;IAEA,MAAM8B,QAAQ,GAAG,IAAIT,UAAU,CAACU,GAAX,CAAeC,QAAnB,CAA4BV,MAA5B,EAAoCM,YAApC,CAAjB;IACAE,QAAQ,CAACG,OAAT,CACGC,SADH,CACaL,aADb,EAEGM,IAFH,GAGGC,IAHH,CAGSC,GAAD,IAAS;MACb5B,OAAO,CAACC,GAAR,CAAY2B,GAAZ;MACAlC,UAAU,CAACkC,GAAD,CAAV;IACD,CANH,EAOGrB,KAPH,CAOUC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CAPlB;EAQD,CAnCD;;EAqCA,MAAMqB,eAAe,GAAG,MAAO1B,CAAP,IAAa;IACnCA,CAAC,CAACC,cAAF;EAGD,CAJD;;EAMA,oBACE;IAAK,SAAS,EAAC,KAAf;IAAA,wBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAQ,OAAO,EAAGD,CAAD,IAAOD,aAAa,CAACC,CAAD,CAArC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,eAGE;MAAQ,OAAO,EAAGA,CAAD,IAAOO,YAAY,CAACP,CAAD,CAApC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAHF,eAIE;MAAQ,OAAO,EAAGA,CAAD,IAAO0B,eAAe,CAAC1B,CAAD,CAAvC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAJF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAQD;;GA7EQb,G;;KAAAA,G;AA+ET,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}